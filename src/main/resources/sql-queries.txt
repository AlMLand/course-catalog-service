select * from instructors ;
select * from instructors as i left join courses as c on i.id = c.instructor_id where c.instructor_id = 2 ;

select * from courses ;
select * from courses as c left join instructors as i on c.instructor_id = i.id where i.id = 2;

select * from courses as c
left join course_coursecategory as ccc on c.id = ccc.course_id
left join course_categories as cc on ccc.course_category_id = cc.id
where cc.category = 'DEVELOPMENT';

select * from course_categories   as cc
left join course_coursecategory as ccc on cc.id = ccc.course_category_id
left join courses as c on ccc.course_id = c.id
where c.name = 'Angular';

---------

create view "public".course_categories_view as select id, category, description from "public".course_categories;
select * from "public".course_categories;
select * from "public".course_categories_view;

create view "public".course_coursecategory_view as select course_id, course_category_id from "public".course_coursecategory;
select * from "public".course_coursecategory;
select * from "public".course_coursecategory_view;

create view "public".courses_view as select id, name, instructor_firstname, instructor_lastname from "public".courses;
select * from "public".courses;
select * from "public".courses_view;

create view "public".instructors_view as select first_name, last_name from "public".instructors;
select * from "public".instructors;
select * from "public".instructors_view;

################################################################################################

update courses c1 set name = c2.name from (select encode(encrypt(name::bytea, '${CRYPTO_SECRET}'::bytea, 'aes-cbc/pad:pkcs'), 'base64') as name from courses) c2 where c1.name = convert_from(decrypt(decode(name, 'base64')::bytea, '${CRYPTO_SECRET}'::bytea, 'aes-cbc/pad:pkcs'), 'UTF-8');
select convert_from(decrypt(decode(name, 'base64')::bytea, '${CRYPTO_SECRET}'::bytea, 'aes-cbc/pad:pkcs'), 'UTF-8') from courses;


update courses c1 set name = c2.name from (select encode(encrypt(name::bytea, 'my_custom_secret'::bytea, 'aes-cbc/pad:pkcs'), 'base64') as name from courses) c2;

update courses c1 set name = c2.name from (select encrypt(name::bytea, 'my_custom_secret'::bytea, 'aes-cbc/pad:pkcs')::text as name from courses) c2;
update courses c1 set name = c2.name from (select convert_to(encrypt(name::bytea, 'my_custom_secret'::bytea, 'aes')::text, 'UTF-8') as name from courses) c2;

update instructors i1 set last_name = i2.last_name from (select pgp_sym_encrypt(last_name, 'my_custom_secret', 'cipher-algo=aes256')::text as last_name from instructors) i2 where i1.last_name = 'M_land';

update mytable t1 set area_code = t2.area_code from (select pgp_sym_encrypt(area_code,'Password', 'compress-algo=1, cipher-algo=aes256')
 as area_code,area_name from mytable) t2 where t1.area_name = t2.area_name;